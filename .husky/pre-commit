# Run lint-staged to enforce code quality checks
npx lint-staged

# Check for security vulnerabilities in production dependencies
echo "ğŸ”’ Checking for security vulnerabilities..."
# Only check production dependencies, exit with 0 to allow commit even if issues found
npm run security:audit --silent || (
  echo "âš ï¸ Security vulnerabilities found in dependencies!"
  echo "ğŸ‘‰ Run 'npm run security:audit' for details and 'npm run security:fix' to fix."
  echo "âš ï¸ Commit allowed, but please address these issues before pushing."
  # We don't block the commit, but warn the developer
)

# Run TypeScript type checking
echo "ğŸ” Running TypeScript type check..."
npm run type-check --silent || (
  echo "âŒ TypeScript errors found. Please fix before committing."
  exit 1
)
