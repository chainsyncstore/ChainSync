# Environment Configuration for ChainSync
# This file provides a template for the environment variables required by the application
# Copy this file to .env and update with your specific values

# ===============================
# Core Application Configuration
# ===============================
NODE_ENV=development          # development, test, production
PORT=3000                     # Port for the HTTP server
HOST=localhost                # Hostname for the server
API_BASE_URL=/api/v1          # Base URL for API endpoints
LOG_LEVEL=info                # debug, info, warn, error
ENABLE_SWAGGER=true           # Enable API documentation

# ===============================
# Database Configuration
# ===============================
DATABASE_URL=postgresql://user:password@localhost:5432/chainsync
DB_POOL_SIZE=10               # Maximum database connections
DB_POOL_IDLE_TIMEOUT=30000    # Milliseconds to keep idle connections

# ===============================
# Redis Configuration
# ===============================
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost          # Alternative to REDIS_URL
REDIS_PORT=6379
REDIS_PASSWORD=               # Redis password if required
REDIS_DB=0                    # Redis database number

# ===============================
# Caching Configuration
# ===============================
CACHE_TTL=3600                # Default cache TTL in seconds
CACHE_ENABLED=true            # Enable response caching

# ===============================
# Session Configuration
# ===============================
SESSION_SECRET=your-secret-key-here
SESSION_COOKIE_NAME=chainSyncSession
SESSION_COOKIE_MAX_AGE=86400000
SESSION_COOKIE_SECURE=false   # Set to true in production
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SAME_SITE=lax  # strict, lax, or none

# ===============================
# Security Configuration
# ===============================
# Rate Limiting
RATE_LIMIT_WINDOW=900000      # Rate limit window in milliseconds (15 minutes)
RATE_LIMIT_MAX=100            # Maximum requests per window
DISABLE_RATE_LIMIT=false      # Only for development/testing

# CSRF Protection
CSRF_SECRET=your-csrf-secret-key
CSRF_COOKIE_NAME=_csrf

# API Keys
API_KEYS=key1,key2            # Comma-separated list of valid API keys

# JWT (for API authentication)
JWT_SECRET=your-jwt-secret-key
JWT_EXPIRES_IN=1d             # JWT expiration time

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
ALLOWED_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE
ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,X-CSRF-Token

# ===============================
# Background Job Queue Configuration
# ===============================
WORKER_CONCURRENCY=2          # Number of concurrent worker processes
JOB_ATTEMPTS=3                # Default job retry attempts
JOB_BACKOFF=5000              # Retry delay in milliseconds

# ===============================
# Observability Configuration
# ===============================
# Logging
LOG_FORMAT=json               # json or text
LOG_FILE_PATH=logs/app.log    # Log file path
LOG_MAX_SIZE=10m              # Maximum log file size before rotation
LOG_MAX_FILES=7               # Number of log files to keep

# Sentry Error Tracking
SENTRY_DSN=                   # Sentry DSN for error tracking
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1 # Percentage of transactions to sample (0.0 - 1.0)
FORCE_SENTRY=false            # Force Sentry in development

# Monitoring and Alerts
ALERT_CHANNELS=               # Comma-separated list of alert channels (slack,email)
SLACK_WEBHOOK_URL=            # Slack webhook URL for alerts
ALERT_EMAIL=                  # Email address for alerts
FORCE_ALERTS=false            # Force alerts in development
ALERT_CHECK_INTERVAL=60000    # Alert check interval in milliseconds

# Monitoring Thresholds
CPU_WARNING_THRESHOLD=70      # CPU usage warning threshold percentage
MEMORY_WARNING_THRESHOLD=80   # Memory usage warning threshold percentage
DB_RESPONSE_WARNING_MS=500   # Database response time warning threshold in ms
HTTP_ERROR_WARNING_RATE=5    # HTTP error rate warning threshold percentage

# OpenTelemetry Distributed Tracing
OTEL_ENABLED=true            # Enable OpenTelemetry distributed tracing
OTEL_SERVICE_NAME=chainsync-api  # Service name for tracing
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces  # OTLP exporter endpoint
OTEL_TRACE_SAMPLER_ARG=1.0   # Sampling rate (0.0-1.0, 1.0 = 100% of traces)
CPU_CRITICAL_THRESHOLD=90     # CPU usage critical threshold percentage
MEMORY_WARNING_THRESHOLD=75   # Memory usage warning threshold percentage
MEMORY_CRITICAL_THRESHOLD=90  # Memory usage critical threshold percentage
DB_CONN_WARNING_THRESHOLD=70  # Database connection warning threshold percentage
DB_CONN_CRITICAL_THRESHOLD=90 # Database connection critical threshold percentage

# ===============================
# Integration Configuration
# ===============================
# Payment Gateways
PAYSTACK_SECRET_KEY=your-paystack-secret-key
PAYSTACK_PUBLIC_KEY=your-paystack-public-key
FLUTTERWAVE_SECRET_KEY=your-flutterwave-secret-key
FLUTTERWAVE_PUBLIC_KEY=your-flutterwave-public-key

# AI Integration
OPENAI_API_KEY=your-openai-api-key

# ===============================
# Storage & Backup Configuration
# ===============================
# Local Storage
STORAGE_PATH=storage          # Path for local file storage

# S3 Backup Storage
AWS_ACCESS_KEY_ID=            # AWS access key
AWS_SECRET_ACCESS_KEY=        # AWS secret key
AWS_REGION=us-east-1          # AWS region
BACKUP_S3_BUCKET=             # S3 bucket for backups
BACKUP_S3_PATH=backups        # Path prefix in S3 bucket
BACKUP_RETENTION_DAYS=7       # Number of days to keep backups
BACKUP_DIR=backups            # Directory for local backups
